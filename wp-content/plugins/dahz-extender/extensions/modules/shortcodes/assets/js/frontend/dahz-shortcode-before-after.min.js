jQuery(document).ready(function(e){var i=!1,t=!1,n=!1,o=e(".cd-image-container");function a(i){i.each(function(){var i=e(this);e(window).scrollTop()+.5*e(window).height()>i.offset().top&&i.addClass("is-visible")}),t=!1}function s(i){i.each(function(){var i=e(this);r(i.find('.cd-image-label[data-type="modified"]'),i.find(".cd-resize-img"),"left"),r(i.find('.cd-image-label[data-type="original"]'),i.find(".cd-resize-img"),"right")}),n=!1}function d(t,n,o,a,s,d,f,u,l,m){var c=t.pageX+n-o||t.originalEvent.pageX+n-o;c<a?c=a:c>s&&(c=s);var g=100*(c+o/2-d)/f+"%";e(".draggable").css("left",g).on("mouseup vmouseup",function(){e(this).removeClass("draggable"),u.removeClass("resizable")}),e(".resizable").css("width",g),r(m,u,"left"),r(l,u,"right"),i=!1}function r(e,i,t){"left"==t?e.offset().left+e.outerWidth()<i.offset().left+i.outerWidth()?e.removeClass("is-hidden"):e.addClass("is-hidden"):e.offset().left>i.offset().left+i.outerWidth()?e.removeClass("is-hidden"):e.addClass("is-hidden")}a(o),e(window).on("scroll",function(){t||(t=!0,window.requestAnimationFrame?requestAnimationFrame(function(){a(o)}):setTimeout(function(){a(o)},100))}),o.each(function(){var t,n,o,a,s,r=e(this);t=r.find(".cd-handle"),n=r.find(".cd-resize-img"),o=r,a=r.find('.cd-image-label[data-type="original"]'),s=r.find('.cd-image-label[data-type="modified"]'),t.on("mousedown vmousedown touchstart",function(e){t.addClass("draggable"),n.addClass("resizable");var r=t.outerWidth(),f=t.offset().left+r-e.pageX||t.offset().left+r-e.originalEvent.pageX,u=o.offset().left,l=o.outerWidth(),m=u+10,c=u+l-r-10;t.parents().on("mousemove vmousemove touchmove",function(e){i||(i=!0,window.requestAnimationFrame?requestAnimationFrame(function(){d(e,f,r,m,c,u,l,n,a,s)}):setTimeout(function(){d(e,f,r,m,c,u,l,n,a,s)},100))}).on("mouseup vmouseup touchend",function(e){t.removeClass("draggable"),n.removeClass("resizable")}),e.preventDefault()}).on("mouseup vmouseup touchend",function(e){t.removeClass("draggable"),n.removeClass("resizable")})}),e(window).on("resize",function(){n||(n=!0,window.requestAnimationFrame?requestAnimationFrame(function(){s(o)}):setTimeout(function(){s(o)},100))})});